{% extends "orders/base.html" %}
{% block title %}إدارة البيانات{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>➕ إضافة قسم / منتج / فرع</h2>

  <div class="row">
    <!-- ✅ إضافة قسم -->
    <div class="col-md-4">
      <h5>إضافة قسم</h5>
      <form method="post">
        {% csrf_token %}
        {{ cat_form.as_p }}
        <button type="submit" name="add_category" class="btn btn-primary">💾 حفظ</button>
        {% if success_message and "القسم" in success_message %}
          <div class="alert alert-success mt-2" id="success-msg">{{ success_message }}</div>
        {% endif %}
      </form>
    </div>

    <!-- ✅ إضافة منتج -->
    <div class="col-md-4">
      <h5>إضافة منتج</h5>
      <form method="post">
        {% csrf_token %}
        {{ prod_form.as_p }}
        <button type="submit" name="add_product" class="btn btn-success">💾 حفظ</button>
        {% if success_message and "المنتج" in success_message %}
          <div class="alert alert-success mt-2" id="success-msg">{{ success_message }}</div>
        {% endif %}
      </form>
    </div>

    <!-- ✅ إضافة فرع -->
    <div class="col-md-4">
      <h5>إضافة فرع</h5>
      <form method="post">
        {% csrf_token %}
        {{ branch_form.as_p }}
        <button type="submit" name="add_branch" class="btn btn-info">💾 حفظ</button>
        {% if success_message and "الفرع" in success_message %}
          <div class="alert alert-success mt-2" id="success-msg">{{ success_message }}</div>
        {% endif %}
      </form>
    </div>
  </div>
</div>

<!-- 🔽 JavaScript لإخفاء الرسالة بعد 3 ثواني -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const msg = document.getElementById("success-msg");
    if (msg) {
      setTimeout(() => {
        msg.style.display = "none";
      }, 3000);
    }
  });
</script>
{% endblock %}
