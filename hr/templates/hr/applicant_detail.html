{% extends "orders/base.html" %}
{% block content %}
<style>
  /* âœ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ù€ Navbar */
  .navbar {
    position: sticky;
    top: 0;
    z-index: 1050; /* ÙŠØ®Ù„ÙŠÙ‡Ø§ ÙÙˆÙ‚ Ø£ÙŠ Ø¹Ù†ØµØ± ØªØ§Ù†ÙŠ */
  }
  .table th.fit {
    white-space: nowrap;
    width: 1%;
    font-weight: bold;
    text-align: right;
  }
  /* âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§ÙØ§Øª Ø¨ÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.d-flex.gap-2 .btn {
  margin-right: 5px;
}

/* âœ… ØªØ£Ø«ÙŠØ± Ù‡ÙˆÙØ± */
.custom-btn {
  transition: transform 0.2s ease, opacity 0.2s ease;
}
.custom-btn:hover {
  transform: translateY(-2px);
  opacity: 0.9;
}
</style>
<div class="container py-4">
  <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="mb-0">ğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ <span class="text-primary">#{{ applicant.order_number }}</span></h3>
    <div class="d-flex gap-2"> <!-- âœ… Ø§Ø³ØªØ¨Ø¯Ù„Øª btn-group Ø¨Ù€ d-flex gap-2 -->
      <a href="{% url 'hr:applicant_edit' applicant.order_number %}" class="btn btn-sm btn-warning custom-btn">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
      <a href="{% url 'hr:applicant_decision' applicant.order_number %}" class="btn btn-sm btn-dark custom-btn">âœ… Ù‚Ø±Ø§Ø±</a>
      <a href="{% url 'hr:export_applicant_excel' applicant.order_number %}" class="btn btn-sm btn-success custom-btn">ğŸ“Š Ø¥ÙƒØ³Ù„</a>
      <a href="{% url 'hr:applicant_list' %}" class="btn btn-sm btn-secondary custom-btn">â†©ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
    </div>
  </div>

  <div class="row g-4">
    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="col-md-8">
      <!-- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
      <div class="card shadow-sm mb-3">
    <div class="card-header bg-light fw-bold">ğŸ‘¤ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</div>
    <div class="card-body p-0">
      <table class="table table-borderless m-0 align-middle">
        <tbody>
          <tr>
            <td><span>{{ applicant.full_name }}</span></td>
            <th class="fit">Ø§Ù„Ø§Ø³Ù…</th>
            <td><span>{{ applicant.national_id }}</span></td>
            <th class="fit">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</th>
          </tr>
          <tr>
            <td><span>{{ applicant.phone }}</span></td>
            <th class="fit">Ø§Ù„Ù‡Ø§ØªÙ</th>
            <td><span>{{ applicant.get_marital_status_display }}</span></td>
            <th class="fit">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</th>
          </tr>
          <tr>
            <td><span>{{ applicant.get_nationality_display }}</span></td>
            <th class="fit">Ø§Ù„Ø¬Ù†Ø³ÙŠØ©</th>
            <td><span>{{ applicant.get_gender_display }}</span></td>
            <th class="fit">Ø§Ù„Ù†ÙˆØ¹</th>
          </tr>
          <tr>
            <td><span>{{ applicant.get_religion_display }}</span></td>
            <th class="fit">Ø§Ù„Ø¯ÙŠØ§Ù†Ø©</th>
            <td><span>{{ applicant.get_military_status_display }}</span></td>
            <th class="fit">Ø§Ù„Ù…ÙˆÙ‚Ù Ù…Ù† Ø§Ù„ØªØ¬Ù†ÙŠØ¯</th>
          </tr>
          <tr>
            <td><span>{{ applicant.relative_name }} - {{ applicant.relative_phone }}</span></td>
            <th class="fit">Ø§Ù„Ù‚Ø±ÙŠØ¨</th>
            <td><span>{{ applicant.is_smoker|yesno:"Ù†Ø¹Ù…,Ù„Ø§" }}</span></td>
            <th class="fit">Ù…Ø¯Ø®Ù†</th>
          </tr>
          <tr>
            <td><span>{{ applicant.get_vehicle_ownership_display }}</span></td>
            <th class="fit">ÙˆØ³ÙŠÙ„Ø©/Ø³ÙŠØ§Ø±Ø©</th>
            <td>
              <span class="badge
                {% if applicant.status == 'accepted' %}bg-success
                {% elif applicant.status == 'rejected' %}bg-danger
                {% else %}bg-secondary{% endif %}">
                {{ applicant.get_status_display }}
              </span>
            </td>
            <th class="fit">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

      <!-- Ø§Ù„Ù…Ø¤Ù‡Ù„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ -->
      <div class="card shadow-sm mb-3">
        <div class="card-header bg-light fw-bold">ğŸ“ Ø§Ù„Ù…Ø¤Ù‡Ù„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</div>
        <div class="card-body p-0">
          <table class="table table-borderless m-0 align-middle">
            <tbody>
              <tr>
                <td>{{ applicant.get_edu_degree_display }}</td>
                <th class="fit">Ø§Ù„Ù…Ø¤Ù‡Ù„</th>
                <td>{{ applicant.grad_year }}</td>
                <th class="fit">Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬</th>
              </tr>
              <tr>
                <td>{{ applicant.edu_institution }}</td>
                <th class="fit">Ø¬Ù‡Ø© Ø§Ù„Ø­ØµÙˆÙ„</th>
                <td>{{ applicant.specialization }}</td>
                <th class="fit">Ø§Ù„ØªØ®ØµØµ</th>
              </tr>
              <tr>
                <td>{{ applicant.postgrad_study }}</td>
                <th class="fit">Ø¯Ø±Ø§Ø³Ø§Øª Ø¹Ù„ÙŠØ§</th>
                <td>{{ applicant.get_edu_grade_display }}</td>
                <th class="fit">Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</th>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© -->
      <div class="card shadow-sm">
        <div class="card-header bg-light fw-bold">ğŸ’¼ Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-sm table-bordered align-middle">
              <thead class="table-dark">
                <tr>
                  <th>Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ù„</th>
                  <th>Ø§Ù„ÙˆØ¸ÙŠÙØ©</th>
                  <th>Ø§Ù„Ø³Ù†ÙˆØ§Øª</th>
                  <th>Ø§Ù„Ø±Ø§ØªØ¨</th>
                  <th>Ø³Ø¨Ø¨ Ø§Ù„ØªØ±Ùƒ</th>
                </tr>
              </thead>
              <tbody>
                {% for e in applicant.experiences.all %}
                <tr>
                  <td>{{ e.employer }}</td>
                  <td>{{ e.job_title }}</td>
                  <td>{{ e.years }}</td>
                  <td>{{ e.salary }}</td>
                  <td>{{ e.reason_for_leaving }}</td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="5" class="text-muted text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¨Ø±Ø§Øª Ù…Ø³Ø¬Ù„Ø©.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
    <div class="col-md-4">
      <!-- Ø§Ù„ØµÙˆØ±Ø© -->
      <div class="card shadow-sm mb-3">
        <div class="card-header bg-light fw-bold">ğŸ–¼ï¸ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</div>
        <div class="card-body text-center">
          {% if applicant.photo %}
            <img src="{{ applicant.photo.url }}" class="img-fluid rounded-circle shadow-sm" alt="photo" style="max-width: 200px;">
          {% else %}
            <div class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø©</div>
          {% endif %}
        </div>
      </div>

      <!-- Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® -->
      <div class="card shadow-sm">
        <div class="card-header bg-light fw-bold">ğŸ“… Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®</div>
        <div class="card-body small">
          <div><b>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…:</b> {{ applicant.submitted_at|date:"Y-m-d H:i" }}</div>
          <div><b>Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</b> {{ applicant.created_at|date:"Y-m-d H:i" }} {% if applicant.created_by %}Ø¨ÙˆØ§Ø³Ø·Ø© {{ applicant.created_by.get_full_name }}{% endif %}</div>
          <div><b>Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„:</b> {{ applicant.updated_at|date:"Y-m-d H:i" }} {% if applicant.last_updated_by %}Ø¨ÙˆØ§Ø³Ø·Ø© {{ applicant.last_updated_by.get_full_name }}{% endif %}</div>
          {% if applicant.decision_at %}
          <div><b>Ø§Ù„Ù‚Ø±Ø§Ø±:</b> {{ applicant.decision_at|date:"Y-m-d H:i" }} {% if applicant.decision_by %}Ø¨ÙˆØ§Ø³Ø·Ø© {{ applicant.decision_by.get_full_name }}{% endif %}</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
